FROM archlinux:latest

####################
# install packages #
####################

ENV CC=gcc
ENV CXX=g++
RUN pacman-key --init; pacman -Syu --noconfirm ; pacman -S --needed --noconfirm sudo;useradd --no-create-home --shell=/bin/false build && usermod -L build;echo "build ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers;echo "root ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers
USER build
COPY ./archlinux/* ./archlinux
RUN chmod +x ./archlinux/bootstrap.sh; ./archlinux/bootstrap.sh;

